const treeData = [
  {
    "name": "assign",
    "class": "woman",
    "children": [
      {
        "name": "id",
        "class": "man",
        "children": [{ "name": "Q", "class": "woman" }],
      },
      { "name": "=", "class": "woman" },
      {
        "name": "expr",
        "class": "man",
        "children": [
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "expr",
                    "class": "man",
                    "children": [
                      {
                        "name": "id",
                        "class": "man",
                        "children": [{ "name": "A", "class": "woman" }],
                      },
                    ],
                  },
                  { "name": "+", "class": "woman" },
                  {
                    "name": "expr",
                    "class": "man",
                    "children": [
                      {
                        "name": "id",
                        "class": "man",
                        "children": [{ "name": "B", "class": "woman" }],
                      },
                    ],
                  },
                ],
              },
              { "name": "*", "class": "woman" },
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "id",
                    "class": "man",
                    "children": [{ "name": "C", "class": "woman" }],
                  },
                ],
              },
            ],
          },
          { "name": "/", "class": "woman" },
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "const",
                "class": "man",
                "children": [{ "name": "8", "class": "woman" }],
              },
            ],
          },
        ],
      },
    ],
  },
  {
    "name": "assign",
    "class": "woman",
    "children": [
      {
        "name": "id",
        "class": "man",
        "children": [{ "name": "Q", "class": "woman" }],
      },
      { "name": "=", "class": "woman" },
      {
        "name": "expr",
        "class": "man",
        "children": [
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "id",
                    "class": "man",
                    "children": [{ "name": "A", "class": "woman" }],
                  },
                ],
              },
              { "name": "+", "class": "woman" },
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "expr",
                    "class": "man",
                    "children": [
                      {
                        "name": "id",
                        "class": "man",
                        "children": [{ "name": "B", "class": "woman" }],
                      },
                    ],
                  },
                  { "name": "*", "class": "woman" },
                  {
                    "name": "expr",
                    "class": "man",
                    "children": [
                      {
                        "name": "id",
                        "class": "man",
                        "children": [{ "name": "C", "class": "woman" }],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          { "name": "/", "class": "woman" },
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "const",
                "class": "man",
                "children": [{ "name": "8", "class": "woman" }],
              },
            ],
          },
        ],
      },
    ],
  },
  {
    "name": "assign",
    "class": "woman",
    "children": [
      {
        "name": "id",
        "class": "man",
        "children": [{ "name": "Q", "class": "woman" }],
      },
      { "name": "=", "class": "woman" },
      {
        "name": "expr",
        "class": "man",
        "children": [
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "id",
                    "class": "man",
                    "children": [{ "name": "A", "class": "woman" }],
                  },
                ],
              },
              { "name": "+", "class": "woman" },
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "id",
                    "class": "man",
                    "children": [{ "name": "B", "class": "woman" }],
                  },
                ],
              },
            ],
          },
          { "name": "*", "class": "woman" },
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "id",
                    "class": "man",
                    "children": [{ "name": "C", "class": "woman" }],
                  },
                ],
              },
              { "name": "/", "class": "woman" },
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "const",
                    "class": "man",
                    "children": [{ "name": "8", "class": "woman" }],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
  {
    "name": "assign",
    "class": "woman",
    "children": [
      {
        "name": "id",
        "class": "man",
        "children": [{ "name": "Q", "class": "woman" }],
      },
      { "name": "=", "class": "woman" },
      {
        "name": "expr",
        "class": "man",
        "children": [
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "id",
                "class": "man",
                "children": [{ "name": "A", "class": "woman" }],
              },
            ],
          },
          { "name": "+", "class": "woman" },
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "expr",
                    "class": "man",
                    "children": [
                      {
                        "name": "id",
                        "class": "man",
                        "children": [{ "name": "B", "class": "woman" }],
                      },
                    ],
                  },
                  { "name": "*", "class": "woman" },
                  {
                    "name": "expr",
                    "class": "man",
                    "children": [
                      {
                        "name": "id",
                        "class": "man",
                        "children": [{ "name": "C", "class": "woman" }],
                      },
                    ],
                  },
                ],
              },
              { "name": "/", "class": "woman" },
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "const",
                    "class": "man",
                    "children": [{ "name": "8", "class": "woman" }],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
  {
    "name": "assign",
    "class": "woman",
    "children": [
      {
        "name": "id",
        "class": "man",
        "children": [{ "name": "Q", "class": "woman" }],
      },
      { "name": "=", "class": "woman" },
      {
        "name": "expr",
        "class": "man",
        "children": [
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "id",
                "class": "man",
                "children": [{ "name": "A", "class": "woman" }],
              },
            ],
          },
          { "name": "+", "class": "woman" },
          {
            "name": "expr",
            "class": "man",
            "children": [
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "id",
                    "class": "man",
                    "children": [{ "name": "B", "class": "woman" }],
                  },
                ],
              },
              { "name": "*", "class": "woman" },
              {
                "name": "expr",
                "class": "man",
                "children": [
                  {
                    "name": "expr",
                    "class": "man",
                    "children": [
                      {
                        "name": "id",
                        "class": "man",
                        "children": [{ "name": "C", "class": "woman" }],
                      },
                    ],
                  },
                  { "name": "/", "class": "woman" },
                  {
                    "name": "expr",
                    "class": "man",
                    "children": [
                      {
                        "name": "const",
                        "class": "man",
                        "children": [{ "name": "8", "class": "woman" }],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
];

// function extractNames(treeData, parentName = "") {
//   let result = "";

//   treeData.forEach((node) => {
//     const name = parentName ? `${parentName} -> ${node.name}` : node.name;

//     if (node.children) {
//       const childNames = extractNames(node.children, name);
//       result += childNames ? `${childNames}` : `${name}`;
//     } else {
//       result += `${name}`;
//     }

//     result += "\n";
//   });

//   return result.trim();
// }

// const output = extractNames(treeData);
// console.log(output);

// function extractNames(treeData, index = 0, parentName = "") {
//   let result = "";

//   const node = treeData[index];
//   const name = parentName ? `${parentName} -> ${node.name}` : node.name;

//   if (node.children) {
//     const childNames = extractNames(node.children, 0, name).trim();
//     result += childNames ? `${childNames}` : `${name}`;
//   } else {
//     result += `${name}`;
//   }

//   return result.trim();
// }

// const output = extractNames(treeData);
// console.log(output);

function extractNames(treeData, parentName = "") {
  let result = "";

  treeData.forEach((node) => {
    const name = parentName ? `${parentName} -> ${node.name}` : node.name;

    if (node.children) {
      const childNames = extractNames(node.children, name);
      result += childNames ? `${childNames}\n` : `${name}\n`;
    } else {
      result += `${name}\n`;
    }
  });

  return result.trim().split("\n").filter(Boolean); // Split by newline, filter out empty strings
}

const relationships = extractNames(treeData);
console.log(relationships[0]);
